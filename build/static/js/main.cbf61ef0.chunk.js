(this["webpackJsonpblog-app"]=this["webpackJsonpblog-app"]||[]).push([[0],{24:function(e,t,r){},34:function(e,t,r){},35:function(e,t,r){},36:function(e,t,r){"use strict";r.r(t);var n=r(1),s=r.n(n),a=r(17),c=r.n(a),o=r(9),i=r(2),l=r(3),d=r(6),u=r(4),h=r(5),j=r(7),m=(r(24),r(0));var b=function(e){return Object(m.jsxs)("div",{className:"bouncing-loader",children:[Object(m.jsx)("div",{}),Object(m.jsx)("div",{}),Object(m.jsx)("div",{})]})};var p=Object(j.f)((function(e){var t=e.articles,r=e.error,n=e.location.pathname;return console.log(n.includes("/profiles")),r?Object(m.jsx)("h2",{className:"text-red-500 text-center text-xl mt-8",children:r}):t?t.length?Object(m.jsx)("article",{children:t.map((function(t){return Object(m.jsxs)("div",{className:"bg-gray-100 flex justify-between my-8  w-full p-4 rounded-md",children:[Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{className:"flex items-center my-8",children:[Object(m.jsx)("img",{src:t.author.image,alt:t.author.username,className:"w-14 h-14 rounded-full object-cover"}),Object(m.jsxs)("div",{className:"ml-4",children:[Object(m.jsx)(h.b,{to:"profiles/".concat(t.author.username),children:Object(m.jsx)("h5",{className:"text-red-500 font-bold text-xl",children:t.author.username})}),Object(m.jsx)("h6",{children:(r=t.createdAt,new Date(r).toISOString().split("T")[0])})]})]}),Object(m.jsx)("h2",{className:"text-2xl font-bold mb-2",children:t.title}),Object(m.jsx)(h.b,{to:"/articles/".concat(t.slug),children:Object(m.jsx)("h4",{className:"bg-green-400 text-white font-bold rounded-lg inline-block py-2 px-3",children:"Read More"})})]}),Object(m.jsxs)("div",{className:"flex items-center text-xl",children:[Object(m.jsx)("i",{className:e.isLoggedIn?t.favorited?"fas fa-heart cursor-pointer text-pink-600":"fas fa-heart cursor-pointer":"fas fa-heart",onClick:function(t){return e.handleFavorite(t)},"data-id":t.favorited,"data-slug":t.slug}),Object(m.jsx)("span",{className:"ml-2",children:t.favoritesCount})]})]},t.slug);var r}))}):Object(m.jsx)("h2",{className:"text-red-500 text-center text-xl mt-8",children:"No articles found"}):Object(m.jsx)(b,{})})),x="https://mighty-oasis-08080.herokuapp.com/api/",g=x+"articles",f=x+"user",O=x+"profiles/",v=function(e){Object(d.a)(r,e);var t=Object(u.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this)).state={allTags:null,error:""},n}return Object(l.a)(r,[{key:"componentDidMount",value:function(){var e=this;fetch("https://mighty-oasis-08080.herokuapp.com/api/tags").then((function(e){if(!e.ok)throw new Error(e.statusText);return e.json()})).then((function(t){var r=t.tags;e.setState({allTags:r.filter((function(e){return Boolean(e)})),error:""})})).catch((function(t){e.setState({error:"Not able to fetch Tags"})}))}},{key:"render",value:function(){var e=this,t=this.state,r=t.error,n=t.allTags;return r?Object(m.jsx)("h2",{className:"text-red-500 text-center text-xl mt-8",children:r}):n?Object(m.jsx)("div",{className:"flex flex-wrap bg-gray-200 px-4 py-8 rounded-md",children:n.map((function(t){return Object(m.jsx)("span",{className:e.props.tagSelected===t?"bg-red-500 p-2 cursor-pointer text-white text-xs rounded-md mx-1 my-1":"bg-gray-700 p-2 cursor-pointer text-white text-xs rounded-md mx-1 my-1",onClick:function(t){return e.props.selectTag(t)},"data-value":t,children:t},t)}))}):Object(m.jsx)(b,{})}}]),r}(s.a.Component);var y=function(e){var t=e.articlesPerPage,r=e.articlesCount,n=e.activePage,s=function(e,t){for(var r=Math.ceil(t/e),n=[],s=0;s<r;s++)n.push(s+1);return n}(t,r);return Object(m.jsx)(m.Fragment,{children:s.length>1&&s.map((function(t,r){return Object(m.jsx)("span",{className:Number(n)===r+1?"bg-black text-white py-2 px-4 mx-4 cursor-pointer":"border border-gray-300 py-2 px-4 mx-4 cursor-pointer","data-id":r+1,onClick:function(t){return e.handleClick(t)},children:t},t)}))})},N=function(e){Object(d.a)(r,e);var t=Object(u.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this)).handleClick=function(e){var t=e.target.dataset.id;n.setState({activePage:t},n.getArticles)},n.getArticles=function(){var e=10*(n.state.activePage-1),t=n.state,r=t.feedSelected,s=t.tagSelected,a="myfeed"===r?"https://mighty-oasis-08080.herokuapp.com/api/articles/feed"+"?limit=".concat(n.state.articlesPerPage,"&offset=").concat(e):g+"?limit=".concat(n.state.articlesPerPage,"&offset=").concat(e)+(s&&"&tag=".concat(s));fetch(a,{method:"GET",headers:{Authorization:"Token "+localStorage.token}}).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.json()})).then((function(e){console.log(e),n.setState({articles:e.articles,articlesCount:e.articlesCount})})).catch((function(e){n.setState({error:"Not able to fetch Articles"})}))},n.selectTag=function(e){var t=e.target.dataset.value;n.setState({tagSelected:t,activePage:1,feedSelected:""},n.getArticles)},n.handleFavorite=function(e){var t=e.target.dataset,r=t.id,s=t.slug,a="false"===r?"POST":"DELETE";console.log(a),console.log(r,s),n.props.isLoggedIn&&fetch(g+"/"+s+"/favorite",{method:a,headers:{Authorization:"Token "+localStorage.token}}).then((function(e){return e.ok?e.json():e.json().then((function(e){var t=e.errors;return Promise.reject(t)}))})).then((function(e){n.getArticles()})).catch((function(e){return console.log(e)}))},n.state={articles:null,error:"",articlesCount:null,articlesPerPage:10,activePage:1,tagSelected:"",feedSelected:""},n}return Object(l.a)(r,[{key:"componentDidMount",value:function(){this.props.isLoggedIn?this.setState({feedSelected:"myfeed"},this.getArticles):this.setState({feedSelected:"global"},this.getArticles)}},{key:"render",value:function(){var e=this,t=this.state,r=t.articles,n=t.error,s=t.articlesCount,a=t.articlesPerPage,c=t.activePage,i=t.feedSelected,l=t.tagSelected;return Object(m.jsxs)("main",{className:"px-24 py-16",children:[Object(m.jsxs)("div",{className:"flex mb-3",children:[Object(m.jsxs)("span",{className:this.props.isLoggedIn?"myfeed"===i?"text-xl mr-8 cursor-pointer text-green-500 pb-2 border-b-2 border-green-500":"text-xl mr-8 cursor-pointer green":"hidden",onClick:function(){e.setState({activePage:1,feedSelected:"myfeed"},e.getArticles)},children:[" ",Object(m.jsx)("i",{className:"fas fa-newspaper mr-2"}),"My feed"]}),Object(m.jsxs)("span",{className:"global"===i?"cursor-pointer text-xl text-green-500 pb-2 border-b-2 border-green-500":"cursor-pointer text-xl",onClick:function(){return e.setState({tagSelected:"",feedSelected:"global",activePage:1},e.getArticles)},children:[Object(m.jsx)("i",{className:"fas fa-newspaper mr-2"}),"Global Feed"]}),Object(m.jsxs)("div",{className:l?"visible text-xl":"hidden",children:[Object(m.jsx)("span",{className:"mx-4 text-gray-500",children:"/"}),Object(m.jsxs)("span",{className:"text-green-700 pb-2 border-b-2 border-green-700",children:["#",this.state.tagSelected]})]})]}),Object(m.jsxs)("section",{className:"flex justify-between ",children:[Object(m.jsx)("div",{className:"flex-70",children:Object(m.jsx)(p,{articles:r,error:n,isLoggedIn:this.props.isLoggedIn,handleFavorite:this.handleFavorite})}),Object(m.jsx)("div",{className:"flex-25",children:Object(m.jsx)(v,Object(o.a)({selectTag:this.selectTag},this.state))})]}),Object(m.jsx)("div",{className:"text-center py-8",children:Object(m.jsx)(y,{articlesCount:s,articlesPerPage:a,activePage:c,handleClick:this.handleClick})})]})}}]),r}(s.a.Component);function S(e){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(h.b,{to:{user:e.user,pathname:"/profiles/".concat(e.user.username)},children:Object(m.jsxs)("li",{className:"flex items-center text-xl mx-3",children:[Object(m.jsx)("i",{className:"fas fa-user mr-2"}),Object(m.jsx)("span",{className:"",children:e.user.username})]})}),Object(m.jsx)(h.b,{to:"/settings",children:Object(m.jsxs)("li",{className:"text-xl mx-3",children:[Object(m.jsx)("i",{className:"fas fa-cog mr-2"}),Object(m.jsx)("span",{className:"",children:"Setings"})]})}),Object(m.jsx)(h.b,{to:"/addArticle",children:Object(m.jsxs)("li",{className:"text-xl mx-3",children:[Object(m.jsx)("i",{className:"fas fa-newspaper mr-2"}),Object(m.jsx)("span",{className:"",children:"New Article"})]})}),Object(m.jsx)("li",{className:"text-xl",children:Object(m.jsx)("span",{className:"cursor-pointer",onClick:e.handleLogout,children:"Logout"})})]})}function w(e){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(h.b,{to:"/register",children:Object(m.jsx)("li",{className:"bg-blue-500 py-3 px-4 text-white font-bold rounded-lg mr-6",children:"Sign up"})}),Object(m.jsx)(h.b,{to:"/login",children:Object(m.jsx)("li",{className:"bg-blue-500 py-3 px-4 text-white font-bold rounded-lg mr-6",children:"Log in"})})]})}var C=Object(j.f)((function(e){return Object(m.jsxs)("header",{className:"flex justify-between bg-gray-300 px-20 py-8 items-center",children:[Object(m.jsx)(h.b,{to:"/",children:Object(m.jsx)("h1",{className:"text-4xl font-extrabold text-green-500 font-logo",children:"Blog App"})}),Object(m.jsx)("nav",{children:Object(m.jsx)("ul",{className:"flex",children:e.isLoggedIn?Object(m.jsx)(S,{user:e.user,handleLogout:function(){localStorage.clear(),e.handleLogout(),e.history.push("/")}}):Object(m.jsx)(w,{})})})]})})),k=r(8);function P(e,t,r){switch(t){case"username":e.username=r?r.length<6?"username should be atleast 6 characters":"":"username is required";break;case"passwd":e.passwd=function(e){return e?e.length<6?"Password must be alteast 6 characters long":-1===e.search(/[a-zA-Z]/)?"Password must contain atleast one letter":-1===e.search(/\d/)?"Password must contain atleast one number":"":"Password is required"}(r);break;case"email":e.email=r?/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(r)?"":"Email is invalid":"email is required"}}var A=function(e){Object(d.a)(r,e);var t=Object(u.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this)).handleChange=function(e){var t,r=e.target,s=r.name,a=r.value,c=n.state.errors;P(c,s,a),n.setState((t={},Object(k.a)(t,s,a),Object(k.a)(t,"errors",c),t))},n.handleSubmit=function(e){var t=n.state,r=t.username,s=t.passwd,a=t.email,c=t.errors;e.preventDefault(),r&&s&&a&&fetch("https://mighty-oasis-08080.herokuapp.com/api/users",{method:"POST",body:JSON.stringify({user:{username:r,password:s,email:a}}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.ok?e.json():e.json().then((function(e){for(var t in e.errors)c[t]="".concat(t," ").concat(e.errors[t]);return Promise.reject(c)}))})).then((function(e){n.props.handleUser(e.user),n.props.history.push("/login")})).catch((function(e){return n.setState({passwd:"",email:"",username:"",errors:c})}))},n.state={username:"",email:"",passwd:"",errors:{username:"",passwd:"",email:""}},n}return Object(l.a)(r,[{key:"render",value:function(){var e=this,t=this.state.errors,r=t.username,n=t.passwd,s=t.email,a=this.state.info;return Object(m.jsx)("main",{children:Object(m.jsx)("section",{className:"mt-20",children:Object(m.jsxs)("form",{className:"w-1/3 mx-auto border border-gray-400 p-6 rounded-md",onSubmit:this.handleSubmit,children:[Object(m.jsxs)("div",{className:"text-center",children:[Object(m.jsx)("legend",{className:"text-2xl font-bold",children:"Sign Up"}),Object(m.jsx)(h.b,{to:"/login",children:Object(m.jsx)("span",{className:"text-blue-700 text-lg text-center",children:"Have an account? "})})]}),Object(m.jsxs)("fieldset",{className:"my-3",children:[Object(m.jsx)("span",{className:"text-red-500",children:a}),Object(m.jsx)("input",{className:"block w-full my-3 py-2 px-3 border border-gray-400 rounded-md",type:"text",placeholder:"Enter Username",value:this.state.username,name:"username",onChange:function(t){return e.handleChange(t)}}),Object(m.jsx)("span",{className:"text-red-500",children:r}),Object(m.jsx)("input",{className:"block w-full my-3 py-2 px-3 border border-gray-400 rounded-md",type:"text",placeholder:"Enter Email",value:this.state.email,name:"email",onChange:function(t){return e.handleChange(t)}}),Object(m.jsx)("span",{className:"text-red-500",children:s}),Object(m.jsx)("input",{className:"block w-full my-3 py-2 px-3 border border-gray-400 rounded-md",type:"password",placeholder:"Enter Password",value:this.state.passwd,name:"passwd",onChange:function(t){return e.handleChange(t)}}),Object(m.jsx)("span",{className:"text-red-500",children:n}),Object(m.jsx)("input",{type:"submit",value:"Sign Up",className:"block w-full my-6 py-2 px-3 bg-blue-500 text-white font-bold cursor-pointer",disabled:r||s||n})]})]})})})}}]),r}(s.a.Component),T=Object(j.f)(A),E=function(e){Object(d.a)(r,e);var t=Object(u.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this)).handleChange=function(e){var t=e.target,r=t.name,s=t.value;n.setState(Object(k.a)({},r,s))},n.handleSubmit=function(e){var t=n.state,r=t.email,s=t.passwd,a=t.error;e.preventDefault(),s&&r&&fetch("https://mighty-oasis-08080.herokuapp.com/api/users/login",{method:"POST",body:JSON.stringify({user:{password:s,email:r}}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.ok?e.json():e.json().then((function(e){var t=Object.keys(e.errors);return a="".concat(t," ").concat(e.errors[t]," "),Promise.reject(a)}))})).then((function(e){n.props.handleUser(e.user),n.props.history.push("/")})).catch((function(e){return n.setState({passwd:"",email:"",error:a})}))},n.state={email:"",passwd:"",error:""},n}return Object(l.a)(r,[{key:"render",value:function(){var e=this,t=this.state.error;return Object(m.jsx)("main",{children:Object(m.jsx)("section",{className:"mt-20",children:Object(m.jsxs)("form",{className:"w-1/3 mx-auto border border-gray-400 p-6 rounded-md",onSubmit:this.handleSubmit,children:[Object(m.jsxs)("div",{className:"text-center",children:[Object(m.jsx)("legend",{className:"text-2xl font-bold",children:"Sign In"}),Object(m.jsx)(h.b,{to:"/register",children:Object(m.jsx)("span",{className:"text-blue-700 text-lg text-center",children:"Need an account? "})})]}),Object(m.jsxs)("fieldset",{className:"my-3",children:[Object(m.jsx)("span",{className:"text-red-500",children:t}),Object(m.jsx)("input",{className:"block w-full my-3 py-2 px-3 border border-gray-400 rounded-md",type:"text",placeholder:"Enter Email",value:this.state.email,name:"email",onChange:function(t){return e.handleChange(t)}}),Object(m.jsx)("input",{className:"block w-full my-3 py-2 px-3 border border-gray-400 rounded-md",type:"password",placeholder:"Enter Password",value:this.state.passwd,name:"passwd",onChange:function(t){return e.handleChange(t)}}),Object(m.jsx)("input",{type:"submit",value:"Login In",className:"block w-full my-6 py-2 px-3 bg-blue-500 text-white font-bold cursor-pointer"})]})]})})})}}]),r}(s.a.Component),L=Object(j.f)(E);var I=function(e){var t=e.comments,r=e.loggedInUser,n=e.isLoggedIn;return t?Object(m.jsx)(m.Fragment,{children:t.length>0?t.map((function(t){return Object(m.jsxs)("div",{className:"flex item-center p-6 bg-gray-100 mb-4 rounded-t-md relative",children:[Object(m.jsx)("div",{className:"",children:Object(m.jsx)("img",{src:t.author.image,alt:t.author.username,className:"w-16 h-16 rounded-full"})}),Object(m.jsxs)("div",{className:"flex flex-col",children:[Object(m.jsxs)("div",{className:"flex items-center",children:[Object(m.jsx)("h4",{className:"text-xl ml-6",children:t.author.username}),Object(m.jsxs)("h4",{className:"text-xl ml-6",children:["#",(s=t.createdAt,new Date(s).toISOString().split("T")[0])]}),Object(m.jsx)("span",{className:r===t.author.username&&n?"absolute right-4 text-xl":"hidden",children:Object(m.jsx)("i",{className:"fas fa-trash cursor-pointer text-red-500","data-id":t.id,onClick:function(t){return e.handleDelete(t)}})})]}),Object(m.jsx)("p",{className:"ml-6 my-4",children:t.body})]})]},t.createdAt);var s})):Object(m.jsx)("h2",{className:"text-xl",children:"No comments yet!"})}):Object(m.jsx)(b,{})},U=function(e){Object(d.a)(r,e);var t=Object(u.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this)).handleChange=function(e){var t=e.target,r=t.name,s=t.value;n.setState(Object(k.a)({},r,s))},n.handleSubmit=function(e){e.preventDefault();var t=n.props.slug,r=n.state.inputText;r&&fetch(g+"/"+t+"/comments",{method:"POST",body:JSON.stringify({comment:{body:r}}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.token}}).then((function(e){return e.ok?e.json():e.json().then((function(e){var t=e.errors;return Promise.reject(t)}))})).then((function(e){console.log(e),n.setState({inputText:"",comments:""},n.getComments)})).catch((function(e){return console.log(e)}))},n.handleDelete=function(e){var t=e.target.dataset.id;console.log(typeof t);var r=n.props.slug;fetch(g+"/"+r+"/comments/"+t,{method:"DELETE",headers:{Authorization:"Token "+localStorage.token}}).then((function(e){if(!e.ok)return e.json().then((function(e){var t=e.errors;return Promise.reject(t)}));n.setState({comments:""},n.getComments)})).catch((function(e){return console.log(e)}))},n.getComments=function(){var e=n.props.slug;fetch(g+"/"+e+"/comments").then((function(e){return e.ok?e.json():e.json().then((function(e){var t=e.errors;return Promise.reject(t)}))})).then((function(e){var t=e.comments;console.log(t),n.setState({comments:t})})).catch((function(e){return console.log(e)}))},n.state={inputText:"",comments:""},n}return Object(l.a)(r,[{key:"componentDidMount",value:function(){this.getComments()}},{key:"render",value:function(){var e=this.state,t=e.inputText,r=e.comments,n=this.props.user.username;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:this.props.isLoggedIn?"":"hidden",children:Object(m.jsxs)("form",{className:"my-6 flex flex-col",onSubmit:this.handleSubmit,children:[Object(m.jsx)("textarea",{className:"w-full border-2 border-gray-400 rounded-md p-3 outline-none focus:border-blue-500",rows:"6",placeholder:"Enter Comments",value:t,onChange:this.handleChange,name:"inputText"}),Object(m.jsx)("input",{type:"submit",value:"Add Comment",className:"bg-blue-500 w-min self-end my-4 py-2 px-4 text-white rounded-md cursor-pointer hover:bg-blue-400"})]})}),Object(m.jsx)("div",{className:"my-8",children:Object(m.jsx)(I,{loggedInUser:n,comments:r,isLoggedIn:this.props.isLoggedIn,handleDelete:this.handleDelete})})]})}}]),r}(s.a.Component),D=function(e){Object(d.a)(r,e);var t=Object(u.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this)).getArticle=function(){fetch(g+"/".concat(n.props.match.params.slug)).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.json()})).then((function(e){console.log(e,"article"),n.setState({article:e.article},n.getUserInfo)})).catch((function(e){n.setState({error:"Not able to fetch Articles"})}))},n.getDate=function(e){return new Date(e).toISOString().split("T")[0]},n.handleEdit=function(){var e=n.state.article.slug;console.log(n.props,"props"),n.props.history.push({pathname:"/articles/edit/".concat(e),article:n.state.article})},n.handleDelete=function(){var e=n.props.user;console.log(e.username,"username"),fetch(g+"/"+n.props.match.params.slug,{method:"DELETE",headers:{Authorization:"Bearer "+localStorage.token}}).then((function(t){if(!t.ok)return t.json().then((function(e){var t=e.errors;return Promise.reject(t)}));n.props.history.push("/profiles/".concat(e.username))})).catch((function(e){return console.log(e)}))},n.state={article:"",error:""},n}return Object(l.a)(r,[{key:"componentDidMount",value:function(){this.getArticle()}},{key:"render",value:function(){var e=this.state,t=e.error,r=e.article,n=this.props,s=n.isLoggedIn,a=n.user;if(t)return Object(m.jsx)("h2",{className:"text-red-500 text-center text-xl mt-8",children:t});if(!r)return Object(m.jsx)(b,{});var c=r.tagList;return Object(m.jsxs)("main",{className:"pb-12",children:[Object(m.jsxs)("section",{className:"px-20 bg-articlePage text-white py-12",children:[Object(m.jsx)("h2",{className:"mt-2 mb-3 text-4xl",children:r.title}),Object(m.jsx)("p",{className:"",children:r.description}),Object(m.jsxs)("div",{className:"flex py-6 items-center",children:[Object(m.jsx)("img",{src:r.author.image,alt:r.author.username,className:"w-16 h-16 object-cover rounded-full"}),Object(m.jsx)("span",{className:"mx-3",children:r.author.username}),Object(m.jsx)("span",{className:"mx-3",children:this.getDate(r.createdAt)})]}),Object(m.jsxs)("div",{className:"flex justify-between",children:[Object(m.jsx)("div",{children:c.map((function(e){return Object(m.jsx)("span",{className:"mr-3 bg-red-400 p-1 px-2 text-xs rounded-md",children:e},e)}))}),Object(m.jsxs)("div",{children:[Object(m.jsx)("span",{className:s&&a.username===r.author.username?"bg-blue-500 py-2 px-4 text-white rounded-md mx-3 cursor-pointer":"hidden",onClick:this.handleEdit,children:"Edit"}),Object(m.jsx)("span",{className:s&&a.username===r.author.username?"bg-red-500 py-2 px-4 text-white rounded-md mx-3 cursor-pointer":"hidden",onClick:this.handleDelete,children:"Delete"})]})]})]}),Object(m.jsx)("section",{className:"px-20 py-12",children:Object(m.jsx)("p",{className:"text-xl",children:r.body})}),Object(m.jsxs)("section",{className:"px-20",children:[Object(m.jsx)("h2",{className:"text-3xl font-bold",children:"Comments"}),Object(m.jsx)(U,Object(o.a)(Object(o.a)({},this.props),{},{slug:r.slug}))]})]})}}]),r}(s.a.Component),F=Object(j.f)(D);var z=function(e){return Object(m.jsx)("h2",{className:"text-red-700 text-xl text-center py-8 font-bold",children:"404 Page Not Found"})};r(34);var B=function(e){return Object(m.jsx)("div",{id:"loading-bar-spinner",className:"spinner",children:Object(m.jsx)("div",{className:"spinner-icon"})})},M=function(e){Object(d.a)(r,e);var t=Object(u.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this)).handleChange=function(e){var t=e.target,r=t.name,s=t.value;n.setState(Object(k.a)({},r,s))},n.handleSubmit=function(e){var t=n.state,r=t.title,s=t.description,a=t.body,c=t.tags,o="Bearer "+localStorage.token;e.preventDefault(),r&&s&&a&&c?fetch(g,{method:"POST",body:JSON.stringify({article:{title:r,description:s,body:a,tagList:c.split(",").map((function(e){return e.trim()}))}}),headers:{"Content-Type":"application/json",Authorization:o}}).then((function(e){return e.ok?e.json():e.json().then((function(e){var t=e.errors;return Promise.reject(t)}))})).then((function(e){n.props.history.push("/")})).catch((function(e){console.log(e),n.setState({title:"",description:"",body:"",tags:"",error:""})})):n.setState({title:"",description:"",body:"",tags:"",error:"Enter all fields"})},n.state={title:"",description:"",body:"",tags:"",error:""},n}return Object(l.a)(r,[{key:"render",value:function(){var e=this.state,t=e.title,r=e.description,n=e.body,s=e.tags,a=e.error;return Object(m.jsx)("main",{children:Object(m.jsx)("section",{className:"pt-20",children:Object(m.jsxs)("form",{className:"w-1/2 mx-auto p-8 border border-gray-400 rounded-md",onSubmit:this.handleSubmit,children:[Object(m.jsx)("legend",{className:"text-3xl text-center font-bold my-3",children:"Add Article"}),Object(m.jsxs)("fieldset",{className:"flex flex-col",children:[Object(m.jsx)("span",{className:"text-red-500 my-1",children:a}),Object(m.jsx)("input",{type:"text",value:t,placeholder:"Title",name:"title",onChange:this.handleChange,className:"my-2 p-2 rounded-md outline-none border-2 border-gray-300 focus:border-blue-500"}),Object(m.jsx)("input",{type:"text",value:r,name:"description",placeholder:"Description",onChange:this.handleChange,className:"my-2 p-2 rounded-md outline-none border-2 border-gray-300 focus:border-blue-500"}),Object(m.jsx)("textarea",{rows:"6",value:n,name:"body",placeholder:"Articles's Body",onChange:this.handleChange,className:"my-2 p-2 rounded-md outline-none border-2 border-gray-300 focus:border-blue-500"}),Object(m.jsx)("input",{type:"text",value:s,name:"tags",placeholder:"Tag List(comma seperated)",onChange:this.handleChange,className:"my-2 p-2 rounded-md outline-none border-2 border-gray-300 focus:border-blue-500"}),Object(m.jsx)("input",{type:"submit",value:"Add Article",className:"my-2 p-2 rounded-md outline-none bg-blue-500 hover:bg-blue-400 text-white "})]})]})})})}}]),r}(s.a.Component),J=Object(j.f)(M),G=function(e){Object(d.a)(r,e);var t=Object(u.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this)).handleChange=function(e){var t,r=e.target,s=r.name,a=r.value,c=n.state.errors;P(c,s,a),n.setState((t={},Object(k.a)(t,s,a),Object(k.a)(t,"errors",c),t))},n.handleSubmit=function(e){var t=n.state,r=t.username,s=t.image,a=t.passwd,c=t.email,o=t.bio,i=t.errors;e.preventDefault(),r&&s&&a&&c&&o&&fetch(f,{method:"PUT",body:JSON.stringify({user:{username:r,email:c,password:a,bio:o,image:"https://pbs.twimg.com/profile_images/1368973967025836036/yIJ1QI8o_400x400.jpg"}}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.token}}).then((function(e){return console.log(e),e.ok?e.json():e.json().then((function(e){for(var t in e.errors)i[t]="".concat(t," ").concat(e.errors[t]);return Promise.reject({errors:i})}))})).then((function(e){n.props.handleUser(e.user),n.props.history.push("/profiles/".concat(e.user.username))})).catch((function(e){return n.setState({errors:i})}))},n.state={image:"",username:e.user.username,email:e.user.email,passwd:"",bio:"",errors:{username:"",email:"",passwd:""}},n}return Object(l.a)(r,[{key:"render",value:function(){var e=this.state.errors,t=e.username,r=e.email,n=e.passwd;return Object(m.jsx)("main",{children:Object(m.jsx)("section",{className:"py-20",children:Object(m.jsxs)("form",{className:"w-1/2 mx-auto p-8 border border-gray-400 rounded-md",onSubmit:this.handleSubmit,children:[Object(m.jsx)("legend",{className:"text-center text-3xl my-2 font-bold",children:"Settings"}),Object(m.jsxs)("fieldset",{className:"flex flex-col",children:[Object(m.jsx)("input",{type:"text",placeholder:"Image Url",value:this.state.image,onChange:this.handleChange,name:"image",className:"my-2 p-2 rounded-md outline-none border-2 border-gray-300 focus:border-blue-500"}),Object(m.jsx)("input",{type:"text",name:"username",value:this.state.username,onChange:this.handleChange,className:"my-2 p-2 rounded-md outline-none border-2 border-gray-300 focus:border-blue-500"}),Object(m.jsx)("span",{className:"my-1 text-red-500",children:t}),Object(m.jsx)("input",{type:"email",name:"email",value:this.state.email,onChange:this.handleChange,className:"my-2 p-2 rounded-md outline-none border-2 border-gray-300 focus:border-blue-500"}),Object(m.jsx)("span",{className:"my-1 text-red-500",children:r}),Object(m.jsx)("input",{type:"password",name:"passwd",value:this.state.passwd,placeholder:"Password",onChange:this.handleChange,className:"my-2 p-2 rounded-md outline-none border-2 border-gray-300 focus:border-blue-500"}),Object(m.jsx)("span",{className:"my-1 text-red-500",children:n}),Object(m.jsx)("textarea",{value:this.state.bio,rows:"6",name:"bio",placeholder:"Enter your Bio",onChange:this.handleChange,className:"my-2 p-2 rounded-md outline-none border-2 border-gray-300 focus:border-blue-500"}),Object(m.jsx)("input",{type:"submit",value:"Update",className:"my-2 p-2 rounded-md outline-none bg-blue-500 hover:bg-blue-400 text-white "})]})]})})})}}]),r}(s.a.Component),q=Object(j.f)(G),Z=function(e){Object(d.a)(r,e);var t=Object(u.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this)).getUserInfo=function(){var e=n.props.match.params.id;fetch(O+e,{method:"GET",headers:{Authorization:"Bearer "+localStorage.token}}).then((function(e){return e.ok?e.json():e.json().then((function(e){e.errors;return Promise.reject()}))})).then((function(e){var t=e.profile;console.log({profile:t}),n.setState({user:t,following:t.following},n.getArticles)})).catch((function(e){return console.log(e)}))},n.handleFollow=function(){var e=n.state.user.username,t=n.state.following;fetch(O+"/"+e+"/follow",{method:t?"DELETE":"POST",headers:{Authorization:"Bearer "+localStorage.token}}).then((function(e){return e.ok?e.json():e.json().then((function(e){e.errors;return Promise.reject()}))})).then((function(e){var t=e.profile;console.log(t),n.setState({following:t.following})})).catch((function(e){return console.log(e)}))},n.handleClick=function(e){var t=e.target.dataset.id;n.setState({activePage:t},n.getArticles)},n.getArticles=function(){var e=n.state.user.username,t=10*(n.state.activePage-1);fetch("".concat(g,"?").concat(n.state.feedSelected,"=").concat(e,"&limit=").concat(n.state.articlesPerPage,"&offset=").concat(t),{method:"GET",headers:{Authorization:"Token "+localStorage.token}}).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.json()})).then((function(e){n.setState({articles:e.articles,articlesCount:e.articlesCount})})).catch((function(e){n.setState({error:"Not able to fetch Articles"})}))},n.handleFavorite=function(e){var t=e.target.dataset,r=t.id,s=t.slug,a="false"===r?"POST":"DELETE";console.log(a),console.log(r,s),fetch(g+"/"+s+"/favorite",{method:a,headers:{Authorization:"Token "+localStorage.token}}).then((function(e){return e.ok?e.json():e.json().then((function(e){var t=e.errors;return Promise.reject(t)}))})).then((function(e){n.getArticles()})).catch((function(e){return console.log(e)}))},n.state={user:"",articles:null,error:"",articlesCount:null,articlesPerPage:10,activePage:1,feedSelected:"author",following:""},n}return Object(l.a)(r,[{key:"componentDidMount",value:function(){this.getUserInfo()}},{key:"componentDidUpdate",value:function(){var e=this.state.user,t=this.props.match.params.id;e.username!==t&&this.getUserInfo()}},{key:"render",value:function(){var e=this;if(!this.state.user)return Object(m.jsx)(b,{});var t=this.state.user,r=t.username,n=t.image,s=t.bio,a=this.props.user.username,c=this.state,o=c.articles,i=c.error,l=c.articlesCount,d=c.activePage,u=c.articlesPerPage,h=c.feedSelected,j=c.following;return Object(m.jsx)("main",{children:Object(m.jsxs)("section",{children:[Object(m.jsxs)("div",{className:"bg-articlePage text-white py-16 text-center",children:[Object(m.jsx)("img",{src:n,alt:r,className:"w-40 h-40 rounded-full mx-auto"}),Object(m.jsx)("h2",{className:"text-5xl my-4",children:r}),Object(m.jsx)("h3",{className:"text-2xl text-pink-300",children:s}),Object(m.jsxs)("button",{className:a!==r?"visible bg-white text-gray-700 px-8 py-3 rounded-md mt-6":"hidden",onClick:this.handleFollow,children:[j?"Unfollow ".concat(r):"Follow ".concat(r)," "]})]}),Object(m.jsxs)("article",{className:"px-40",children:[Object(m.jsxs)("div",{className:"py-6",children:[Object(m.jsxs)("span",{className:"author"===h?"cursor-pointer text-xl text-green-500 pb-2 border-b-2 border-green-500":"cursor-pointer text-xl",onClick:function(){return e.setState({feedSelected:"author",activePage:1},e.getArticles)},children:[Object(m.jsx)("i",{className:"fas fa-newspaper mr-2"}),"My Articles"]}),Object(m.jsx)("span",{className:"mx-4",children:"/"}),Object(m.jsxs)("span",{className:"favorited"===h?"cursor-pointer text-xl text-green-500 pb-2 border-b-2 border-green-500":"cursor-pointer text-xl",onClick:function(){return e.setState({feedSelected:"favorited",activePage:1},e.getArticles)},children:[Object(m.jsx)("i",{className:"fas fa-newspaper mr-2"}),"Favorited"]})]}),Object(m.jsx)("div",{className:"",children:Object(m.jsx)(p,{articles:o,error:i,isLoggedIn:this.props.isLoggedIn,handleFavorite:this.handleFavorite})})]}),Object(m.jsx)("div",{className:"text-center py-8",children:Object(m.jsx)(y,{articlesCount:l,articlesPerPage:u,activePage:d,handleClick:this.handleClick})})]})})}}]),r}(s.a.Component),_=Object(j.f)(Z),H=function(e){Object(d.a)(r,e);var t=Object(u.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this)).getArticle=function(){fetch(g+"/".concat(n.props.match.params.slug)).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.json()})).then((function(e){var t=e.article,r=t.title,s=t.description,a=t.tagList,c=t.body;n.setState({article:t,title:r,body:c,description:s,tags:a.join(",")})})).catch((function(e){console.log(e)}))},n.handleChange=function(e){var t=e.target,r=t.name,s=t.value;n.setState(Object(k.a)({},r,s))},n.handleSubmit=function(e){var t=n.state,r=t.title,s=t.description,a=t.body,c=t.tags,o="Bearer "+localStorage.token;e.preventDefault(),r&&s&&a&&c?fetch(g+"/"+n.props.match.params.slug,{method:"PUT",body:JSON.stringify({article:{title:r,description:s,body:a,tagList:c.split(",").map((function(e){return e.trim()}))}}),headers:{"Content-Type":"application/json",Authorization:o}}).then((function(e){return e.ok?e.json():e.json().then((function(e){var t=e.errors;return Promise.reject(t)}))})).then((function(e){n.props.history.push("/articles/".concat(n.props.match.params.slug))})).catch((function(e){console.log(e)})):n.setState({error:"Enter all fields"})},n.state={article:"",title:"",description:"",body:"",tags:"",error:""},n}return Object(l.a)(r,[{key:"componentDidMount",value:function(){this.getArticle()}},{key:"render",value:function(){var e=this.state,t=e.title,r=e.description,n=e.body,s=e.tags,a=e.error;return e.article?Object(m.jsx)("main",{children:Object(m.jsx)("section",{className:"pt-20",children:Object(m.jsxs)("form",{className:"w-1/2 mx-auto p-8 border border-gray-400 rounded-md",onSubmit:this.handleSubmit,children:[Object(m.jsx)("legend",{className:"text-3xl text-center font-bold my-3",children:"Update Article"}),Object(m.jsxs)("fieldset",{className:"flex flex-col",children:[Object(m.jsx)("span",{className:"text-red-500 my-1",children:a}),Object(m.jsx)("input",{type:"text",value:t,placeholder:"Title",name:"title",onChange:this.handleChange,className:"my-2 p-2 rounded-md outline-none border-2 border-gray-300 focus:border-blue-500"}),Object(m.jsx)("input",{type:"text",value:r,name:"description",placeholder:"Description",onChange:this.handleChange,className:"my-2 p-2 rounded-md outline-none border-2 border-gray-300 focus:border-blue-500"}),Object(m.jsx)("textarea",{rows:"6",value:n,name:"body",placeholder:"Articles's Body",onChange:this.handleChange,className:"my-2 p-2 rounded-md outline-none border-2 border-gray-300 focus:border-blue-500"}),Object(m.jsx)("input",{type:"text",value:s,name:"tags",placeholder:"Tag List(comma seperated)",onChange:this.handleChange,className:"my-2 p-2 rounded-md outline-none border-2 border-gray-300 focus:border-blue-500"}),Object(m.jsx)("input",{type:"submit",value:"Update Article",className:"my-2 p-2 rounded-md outline-none bg-blue-500 hover:bg-blue-400 text-white "})]})]})})}):Object(m.jsx)(b,{})}}]),r}(s.a.Component),Q=Object(j.f)(H);function R(e){return Object(m.jsxs)(j.c,{children:[Object(m.jsx)(j.a,{path:"/",exact:!0,children:Object(m.jsx)(N,Object(o.a)({},e))}),Object(m.jsx)(j.a,{path:"/articles/:slug",children:Object(m.jsx)(F,Object(o.a)({},e))}),Object(m.jsx)(j.a,{path:"/register",children:Object(m.jsx)(T,{handleUser:e.handleUser})}),Object(m.jsx)(j.a,{path:"/login",children:Object(m.jsx)(L,{handleUser:e.handleUser})}),Object(m.jsx)(j.a,{path:"*",children:Object(m.jsx)(z,{})})]})}function $(e){return Object(m.jsxs)(j.c,{children:[Object(m.jsx)(j.a,{path:"/",exact:!0,children:Object(m.jsx)(N,Object(o.a)({},e))}),Object(m.jsx)(j.a,{path:"/articles",exact:!0,children:Object(m.jsx)(N,Object(o.a)({},e))}),Object(m.jsx)(j.a,{path:"/articles/edit/:slug",children:Object(m.jsx)(Q,{})}),Object(m.jsx)(j.a,{path:"/articles/:slug",children:Object(m.jsx)(F,Object(o.a)({},e))}),Object(m.jsx)(j.a,{path:"/addArticle",children:Object(m.jsx)(J,{})}),Object(m.jsx)(j.a,{path:"/settings",children:Object(m.jsx)(q,{user:e.user,handleUser:e.handleUser})}),Object(m.jsx)(j.a,{path:"/profiles/:id",children:Object(m.jsx)(_,{user:e.user,isLoggedIn:e.isLoggedIn})}),Object(m.jsx)(j.a,{path:"*",children:Object(m.jsx)(z,{})})]})}var K=function(e){Object(d.a)(r,e);var t=Object(u.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this)).handleUser=function(e){n.setState({isLoggedIn:!0,user:e,loading:!1}),localStorage.setItem("token",e.token)},n.handleLogout=function(){n.setState({isLoggedIn:!1})},n.state={isLoggedIn:!1,user:"",loading:!0},n}return Object(l.a)(r,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("token");t?fetch(f,{method:"GET",headers:{Authorization:"Bearer "+t}}).then((function(e){return e.ok?e.json():e.json().then((function(e){var t=e.errors;return Promise.reject(t)}))})).then((function(t){e.handleUser(t.user)})).catch((function(e){return console.log(e)})):this.setState({loading:!1})}},{key:"render",value:function(){return this.state.loading?Object(m.jsx)(B,{}):Object(m.jsxs)(h.a,{children:[Object(m.jsx)(C,Object(o.a)(Object(o.a)({},this.state),{},{handleLogout:this.handleLogout})),this.state.isLoggedIn?Object(m.jsx)($,Object(o.a)(Object(o.a)({},this.state),{},{handleUser:this.handleUser})):Object(m.jsx)(R,Object(o.a)({handleUser:this.handleUser},this.state))]})}}]),r}(s.a.Component);r(35);c.a.render(Object(m.jsx)(K,{}),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.cbf61ef0.chunk.js.map